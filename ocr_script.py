# -*- coding: utf-8 -*-
"""OCR script

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1X8hfGU2Vjvu88MjI_OQPBDVbeXnIxyiN
"""

from google.cloud import vision
import io

# Initialize the Google Vision client
client = vision.ImageAnnotatorClient()

# Upload the scanned handwritten image
from google.colab import files
uploaded = files.upload()

# Specify the image filename
file_name = list(uploaded.keys())[0]  # Gets the first file name in the uploaded list

# Read the image
with io.open(file_name, 'rb') as image_file:
    content = image_file.read()

image = vision.Image(content=content)

# Perform OCR for handwritten text using document_text_detection
response = client.document_text_detection(image=image)
document = response.full_text_annotation

# Print detected text
print("Detected Text:")
print(document.text)

# Error handling
if response.error.message:
    raise Exception(f"Error from Google Vision API: {response.error.message}")